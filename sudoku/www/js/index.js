!function(r){var e={};function n(t){if(e[t])return e[t].exports;var a=e[t]={i:t,l:!1,exports:{}};return r[t].call(a.exports,a,a.exports,n),a.l=!0,a.exports}n.m=r,n.c=e,n.d=function(r,e,t){n.o(r,e)||Object.defineProperty(r,e,{enumerable:!0,get:t})},n.r=function(r){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(r,"__esModule",{value:!0})},n.t=function(r,e){if(1&e&&(r=n(r)),8&e)return r;if(4&e&&"object"==typeof r&&r&&r.__esModule)return r;var t=Object.create(null);if(n.r(t),Object.defineProperty(t,"default",{enumerable:!0,value:r}),2&e&&"string"!=typeof r)for(var a in r)n.d(t,a,function(e){return r[e]}.bind(null,a));return t},n.n=function(r){var e=r&&r.__esModule?function(){return r.default}:function(){return r};return n.d(e,"a",e),e},n.o=function(r,e){return Object.prototype.hasOwnProperty.call(r,e)},n.p="",n(n.s=3)}([function(r,e){function n(r,e){for(var n=0;n<e.length;n++){var t=e[n];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(r,t.key,t)}}function t(r){return function(r){if(Array.isArray(r)){for(var e=0,n=new Array(r.length);e<r.length;e++)n[e]=r[e];return n}}(r)||function(r){if(Symbol.iterator in Object(r)||"[object Arguments]"===Object.prototype.toString.call(r))return Array.from(r)}(r)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var a={makeRow:function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=new Array(9);return e.fill(r)},makeMatrix:function(){var r=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return Array.from({length:9}).map((function(){return r.makeRow(e)}))},shuffle:function(r){for(var e=r.length-2,n=0;n<=e;n++){var a=n+Math.floor(Math.random()*(r.length-n)),o=[r[a],r[n]];r[n]=o[0],r[a]=o[1]}return t(r)},checkFillable:function(r,e,n,t){for(var a=r[n],i=Array.from({length:9}).map((function(e,n){return r[n][t]})),c=o.convertToBoxIndex(n,t).boxIndex,u=o.getBoxCells(r,c),l=0;l<9;l++)if(a[l]===e||i[l]===e||u[l]===e)return!1;return!0}},o={convertToBoxIndex:function(r,e){return{boxIndex:3*Math.floor(r/3)+Math.floor(e/3),cellIndex:r%3*3+e%3}},convertFromBoxIndex:function(r,e){return{rowIndex:3*Math.floor(r/3)+Math.floor(e/3),colIndex:r%3*3+e%3}},getBoxCells:function(r,e){for(var n=3*Math.floor(e/3),t=e%3*3,a=[],o=n;o<n+3;o++)for(var i=t;i<t+3;i++)a.push(r[o][i]);return a}};r.exports=function(){function r(){!function(r,e){if(!(r instanceof e))throw new TypeError("Cannot call a class as a function")}(this,r)}var e,t,i;return e=r,i=[{key:"matrix",get:function(){return a}},{key:"box",get:function(){return o}}],(t=null)&&n(e.prototype,t),i&&n(e,i),r}()},function(r,e,n){function t(r,e){for(var n=0;n<e.length;n++){var t=e[n];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(r,t.key,t)}}n(0),n(2);var a=n(4),o=n(5),i=["#FFFFFF","#4876FF","#458B00","#CD6600","#27408B","#B22222","#48D1CC","#CD00CD","#EEC900","#000000"],c=function(){function r(e){!function(r,e){if(!(r instanceof e))throw new TypeError("Cannot call a class as a function")}(this,r),this._$container=e}var e,n,c;return e=r,(n=[{key:"build",value:function(){var r=(new a).makePuzzle(),e=["row_g_top","row_g_middle","row_g_bottom"],n=["col_g_left","col_g_middle","col_g_right"],t=r.map((function(r){return r.map((function(r,e){return $("<span>").addClass(n[e%3]).text(r).addClass(r?"fixed":"empty").css({color:i[r]})}))})).map((function(r,n){return $("<div>").addClass("row").addClass(e[n%3]).append(r)}));this._$container.append(t)}},{key:"layout",value:function(){var r=$("span:first",this._$container).width();$("span",this._$container).height(r).css({"line-height":"".concat(r,"px"),"font-size":r<32?"".concat(r/2,"px"):""})}},{key:"check",value:function(){var r=this._$container.children().map((function(r,e){return $(e).children().map((function(r,e){return parseInt($(e).text())}))})).toArray().map((function(r){return r.toArray()})),e=new o(r);if(e.check())return!0;var n=e._matrixMarks;this._$container.children().each((function(r,e){$(e).children().each((function(e,t){$(t).is(".fixed")||n[r][e]||$(t).addClass("error")}))}))}},{key:"reset",value:function(){this._$container.find("span:not(.fixed)").removeClass("error mark1 mark2").text(0)}},{key:"clear",value:function(){this._$container.find("span.error").removeClass("error")}},{key:"rebuild",value:function(){this._$container.empty(),this.build(),this.layout()}},{key:"bindPopup",value:function(r){this._$container.on("click","span",(function(e){var n=$(e.target);n.hasClass("fixed")||r.popup(n)}))}}])&&t(e.prototype,n),c&&t(e,c),r}();r.exports=c},function(r,e,n){function t(r,e){for(var n=0;n<e.length;n++){var t=e[n];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(r,t.key,t)}}var a=n(0),o=function(){function r(){!function(r,e){if(!(r instanceof e))throw new TypeError("Cannot call a class as a function")}(this,r)}var e,n,o;return e=r,(n=[{key:"generate",value:function(){for(;!this.internalGenerate();)console.warn("rebuild!");return this.matrix}},{key:"internalGenerate",value:function(){var r=this;return this.matrix=a.matrix.makeMatrix(),this.orders=Array.from({length:9}).map((function(){return Array.from({length:9},(function(r,e){return e}))})).map((function(r){return a.matrix.shuffle(r)})),Array.from({length:9}).every((function(e,n){return r.fillNumber(n+1)}))}},{key:"fillNumber",value:function(r){return this.fillRow(r,0)}},{key:"fillRow",value:function(r,e){if(e>8)return!0;for(var n=this.matrix[e],t=this.orders[e],o=0;o<9;o++){var i=t[o];if(!n[i]&&a.matrix.checkFillable(this.matrix,r,e,i)){if(n[i]=r,this.fillRow(r,e+1))return!0;n[i]=0}}return!1}}])&&t(e.prototype,n),o&&t(e,o),r}();r.exports=o},function(r,e,n){n(0);var t=n(1),a=n(6),o=new t($("#container"));o.build(),o.layout();var i=new a($("#popupNumbers"));o.bindPopup(i),$("#check").on("click",(function(r){o.check()&&alert("成功！")})),$("#reset").on("click",(function(r){o.reset()})),$("#clear").on("click",(function(r){o.clear()})),$("#rebuild").on("click",(function(r){o.rebuild()}))},function(r,e,n){function t(r,e){for(var n=0;n<e.length;n++){var t=e[n];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(r,t.key,t)}}var a=n(2),o=(n(0),function(){function r(){!function(r,e){if(!(r instanceof e))throw new TypeError("Cannot call a class as a function")}(this,r),this.matrix=(new a).generate()}var e,n,o;return e=r,(n=[{key:"makePuzzle",value:function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5;return this.puzzleMatrix=this.matrix.map((function(e){return e.map((function(e){return 9*Math.random()<=r?0:e}))})),this.puzzleMatrix}}])&&t(e.prototype,n),o&&t(e,o),r}());r.exports=o},function(r,e,n){function t(r,e){for(var n=0;n<e.length;n++){var t=e[n];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(r,t.key,t)}}var a=n(0),o=function(){function r(e){!function(r,e){if(!(r instanceof e))throw new TypeError("Cannot call a class as a function")}(this,r),this._matrix=e,this._matrixMarks=a.matrix.makeMatrix(!0),this._success=!0}var e,n,o;return e=r,o=[{key:"checkArray",value:function(r){var e=r.length,n=new Array(e);n.fill(!0);for(var t=0;t<e;t++)if(n[t]){var a=r[t];if(a)for(var o=t+1;o<e;o++)a===r[o]&&(n[t]=!1,n[o]=!1);else n[t]=!1}return n}}],(n=[{key:"check",value:function(){return this.checkRows(),this.checkCols(),this.checkBoxes(),this._success=this._matrixMarks.every((function(r){return r.every((function(r){return!0===r}))})),this._success}},{key:"checkRows",value:function(){for(var e=0;e<9;e++)for(var n=this._matrix[e],t=r.checkArray(n),a=0;a<9;a++)t[a]||(this._matrixMarks[e][a]=!1)}},{key:"checkCols",value:function(){for(var e=this,n=function(n){for(var t=Array.from({length:9}).map((function(r,t){return e._matrix[t][n]})),a=r.checkArray(t),o=0;o<9;o++)a[o]||(e._matrixMarks[o][n]=!1)},t=0;t<9;t++)n(t)}},{key:"checkBoxes",value:function(){var e=this;Array.from({length:9}).map((function(r,n){return a.box.getBoxCells(e._matrix,n)})).forEach((function(n,t){var o=r.checkArray(n);o.forEach((function(r,n){if(!o[n]){var i=a.box.convertFromBoxIndex(t,n),c=i.rowIndex,u=i.colIndex;e._matrixMarks[c][u]=!1}}))}))}},{key:"success",get:function(){return this._success}}])&&t(e.prototype,n),o&&t(e,o),r}();r.exports=o},function(r,e,n){function t(r,e){for(var n=0;n<e.length;n++){var t=e[n];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(r,t.key,t)}}n(1);var a=["#FFFFFF","#4876FF","#458B00","#CD6600","#27408B","#B22222","#48D1CC","#CD00CD","#EEC900","#000000"],o=function(){function r(e){var n=this;!function(r,e){if(!(r instanceof e))throw new TypeError("Cannot call a class as a function")}(this,r),this._$panel=e.hide().removeClass("hidden"),this._$panel.on("click","span",(function(r){var e=n._$targetCell,t=$(r.target);t.hasClass("mark1")?e.hasClass("mark1")?e.removeClass("mark1"):e.removeClass("mark2").addClass("mark1"):t.hasClass("mark2")?e.hasClass("mark2")?e.removeClass("mark2"):e.removeClass("mark1").addClass("mark2"):t.hasClass("empty")?e.text(0).removeClass("mark1").removeClass("mark2").addClass("empty").css({color:a[0]}):e.removeClass("empty").text(t.text()).css({color:a[t.text()]}),n._$panel.hide()}))}var e,n,o;return e=r,(n=[{key:"popup",value:function(r){this._$targetCell=r;var e=r.position(),n=e.left,t=e.top;this._$panel.css({left:"".concat(n,"px"),top:"".concat(t,"px")}).show()}}])&&t(e.prototype,n),o&&t(e,o),r}();r.exports=o}]);
//# sourceMappingURL=index.js.map